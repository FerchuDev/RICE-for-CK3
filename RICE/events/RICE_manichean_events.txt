###############################################################################
# 
# MANICHEAN
# 
# manichean.0000-manichean.0019			Setup events, history events, miscellaneous events and decisions
# manichean.0020-manichean.0029			Minor decisions
# manichean.0030-manichean.0049			Bema Festival
# manichean.0050-manichean.0069			Manuscript decision
# manichean.0070-manichean.0079			Pilgrimage to Bezeklik
# manichean.0080-manichean.0089			Pilgrimage to Dunhuang
# manichean.0090-manichean.0099			Misc Chinese Manicheism stuff
# manichean.0100-manichean.0129			Generic flavor events
# 
###############################################################################

namespace = manichean

######################################################################################
# 
# SETUP EVENTS, HISTORY EVENTS, MISC DECISIONS
# 
# manichean.0000-manichean.0019
# 
######################################################################################


# Restore Manicheism in Mesopotamia
manichean.0001 = {
	type = character_event
	window = fullscreen_event
	title = manichean.0001.t
	desc = manichean.0001.desc
	theme = faith
	override_background = { reference = fp3_fullscreen_rekindle }

	immediate = {
		title:d_manichean.holder = {
			save_scope_as = archegos
		}
		title:c_kufa = {
			save_scope_as = babylon
		}
		if = {
			limit = {
				root = scope:manichean_reviver
			}
			RICE_revive_manicheism_in_mesopotamia_effect = yes
			# Discover the sealstone of Mani
			trigger_event = {
				id = manichean.0006
				days = { 365 3650 }
			}
		}
		else = {
			show_as_tooltip = {
				scope:manichean_reviver = {
					RICE_revive_manicheism_in_mesopotamia_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = manichean.0001.a
		trigger = {
			faith = { has_doctrine = rice_light_purification_doctrine }
		}		
	}
	
	option = { # Ok
		name = manichean.0001.b
		trigger = {
			NOT = { faith = { has_doctrine = rice_light_purification_doctrine } }
		}	
	}

}



# Persecution by the caliphs / Move the Archegos to Samarkand
manichean.0004 = {
	type = character_event
	window = fullscreen_event
	title = manichean.0004.t
	desc = manichean.0004.desc
	theme = faith
	override_background = { reference = fp3_fullscreen_sunder }

	immediate = {
		title:d_manichean.holder = {
			save_scope_as = archegos
		}
		title:c_samarkand = {
			save_scope_as = county
		}
		title:c_kufa = {
			save_scope_as = babylon
		}
		if = {
			limit = {
				root = scope:persecutor
			}
			RICE_persecute_manicheans_in_mesopotamia_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:persecutor = {
					RICE_persecute_manicheans_in_mesopotamia_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = manichean.0004.a
		trigger = {
			faith = { has_doctrine = rice_light_purification_doctrine }
		}		
	}
	
	option = { # Ok
		name = manichean.0004.b
		trigger = {
			NOT = { faith = { has_doctrine = rice_light_purification_doctrine } }
		}	
	}

}

# Set up Archaegos
manichean.0005 = {
	type = character_event
	hidden = yes

	immediate = {
		RICE_manichean_create_archegos_effect = yes
	}

}

# Mani Sealstone Artifact
manichean.0006 = {
	type = character_event
	title = manichean.0006.t
	desc = manichean.0006.desc
	theme = faith
	override_background = { reference = RICE_background_khuzestan_farmland }

	right_portrait = {
		character = scope:discoverer
		animation = admiration
	}

	artifact = { # To display the artifact in the event-window
		target = scope:RICE_manichean_mani_sealstone
		position = lower_center_portrait
	}

	trigger = {
		NOT = { has_global_variable = RICE_mani_sealstone_found }
		faith = { has_doctrine = rice_light_purification_doctrine }
	}

	immediate = {
		set_global_variable = {
			name = RICE_mani_sealstone_found
			value = yes
		}
		save_scope_as = discoverer
		play_music_cue = "mx_cue_epic_sacral_moment"
		faith:manichean = {
			save_scope_as = manichean_faith
		}
		culture:assyrian = {
			save_scope_as = syriac_culture
		}
		random_county_in_region = {
			region = world_mesopotamia
			save_scope_as = county
		}

		hidden_effect_new_object = {
			create_artifact = {	
				name = RICE_manichean_mani_sealstone_name
				description = RICE_manichean_mani_sealstone_desc
				type = regalia_simple
				template = RICE_manichean_relic_template
				visuals = RICE_manichean_mani_sealstone
				quality = 100
				wealth = 100
				modifier = RICE_manichean_mani_sealstone_modifier
				decaying = no
				save_scope_as = RICE_manichean_mani_sealstone
				history = {
					type = created_before_history
				}
			}
		}
	}
	
	option = { # keep it
		name = manichean.0006.a
		add_piety = 500
		show_as_tooltip = {
			scope:RICE_manichean_mani_sealstone = {
				set_owner = {
					target = root
				}
			}
		}
		every_ruler = {
			limit = {
				OR = {
					this = scope:discoverer
					faith = {
						has_doctrine = rice_light_purification_doctrine
					}
				}
			}
			trigger_event = manichean.0007
		}
	}
	
	# option = { # don't keep it
	# 	name = manichean.0006.b
	# 	destroy_artifact = scope:RICE_manichean_mani_sealstone
	# }

}



# Notification event for Manichean Seal stone discovery
# TerrainTypeCountyScope
# IndefiniteBodyOfWater_Static
manichean.0007 = {
	type = character_event
	title = manichean.0007.t
	desc = manichean.0007.desc
	theme = faith
	override_background = { reference = RICE_background_khuzestan_farmland }

	right_portrait = {
		character = scope:discoverer
		animation = admiration
	}

	artifact = { # To display the artifact in the event-window
		target = scope:RICE_manichean_mani_sealstone
		position = lower_center_portrait
	}

	immediate = {
		show_as_tooltip = {
			add_piety = 500
			scope:RICE_manichean_mani_sealstone = {
				set_owner = {
					target = root
				}
			}
		}
	}
	
	option = { # Ok
		name = manichean.0007.a
	}

}



# Inherit the Lin Deng trait
manichean.0008 = {
	hidden = yes
	
	trigger = {
		OR = {
			# Father has Lin Deng trait, gender doctrine allows inheritance of it
			AND = {
				exists = father
				father = {
					has_trait = RICE_disciple_of_lin_deng
				}
				# father = {
				# 	faith = {
				# 		NOT = { has_doctrine = doctrine_gender_female_dominated }
				# 	}
				# }
			}
			# Mother has Lin Deng trait, gender doctrine allows inheritance of it
			AND = {
				exists = mother
				mother = {
					has_trait = RICE_disciple_of_lin_deng
				}
				# mother = {
				# 	faith = {
				# 		NOT = { has_doctrine = doctrine_gender_male_dominated }
				# 	}
				# }
			}
		}
	}
	
	immediate = {
		add_trait = RICE_disciple_of_lin_deng
	}
}


# Powerful Uyghur leader supports the Manichean Church in trouble
manichean.0010 = {
	type = character_event
	title = manichean.0010.t
	desc = manichean.0010.desc
	theme = faith
	override_background = { reference = RICE_background_iranian_throne_room }

	right_portrait = {
		character = scope:uyghur_leader
		animation = personality_zealous
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		if = {
			limit = {
				root = scope:uyghur_leader
			}
			RICE_manichean_uyghur_decision_support_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:uyghur_leader = {
					RICE_manichean_uyghur_decision_support_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = manichean.0010.a
		trigger = {
			faith = { has_doctrine = rice_light_purification_doctrine }
		}		
	}
	
	option = { # Ok
		name = manichean.0010.b
		trigger = {
			NOT = { faith = { has_doctrine = rice_light_purification_doctrine } }
		}	
	}

}


# Powerful Uyghur leader reforms the Manichean Church in trouble
manichean.0011 = {
	type = character_event
	title = manichean.0011.t
	desc = manichean.0011.desc
	theme = faith
	override_background = { reference = RICE_background_iranian_throne_room }

	right_portrait = {
		character = scope:uyghur_leader
		animation = personality_bold
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		if = {
			limit = {
				root = scope:uyghur_leader
			}
			RICE_manichean_uyghur_decision_reform_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:uyghur_leader = {
					RICE_manichean_uyghur_decision_reform_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = manichean.0011.a
		trigger = {
			faith = { has_doctrine = rice_light_purification_doctrine }
		}		
	}
	
	option = { # Ok
		name = manichean.0011.b
		trigger = {
			NOT = { faith = { has_doctrine = rice_light_purification_doctrine } }
		}	
	}

}


# Powerful Uyghur leader abandons the Manichean Church in trouble
manichean.0012 = {
	type = character_event
	title = manichean.0012.t
	desc = manichean.0012.desc
	theme = faith
	override_background = { reference = RICE_background_iranian_throne_room }

	right_portrait = {
		character = scope:uyghur_leader
		animation = personality_bold
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		if = {
			limit = {
				root = scope:uyghur_leader
			}
			RICE_manichean_uyghur_decision_abandon_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:uyghur_leader = {
					RICE_manichean_uyghur_decision_abandon_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = manichean.0012.a
		trigger = {
			faith = { has_doctrine = rice_light_purification_doctrine }
		}		
	}
	
	option = { # Ok
		name = manichean.0012.b
		trigger = {
			NOT = { faith = { has_doctrine = rice_light_purification_doctrine } }
		}	
	}

	after = {
		if = {
			limit = {
				root = scope:uyghur_leader
				scope:uyghur_leader = {
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_former_uyghur_influence_region
						}
						faith = {
							NOT = {
								has_doctrine = rice_light_purification_doctrine
							}
						}
					}
				}
			}
			trigger_event = manichean.0013
		}
	}

}


# Powerful Uyghur leader considers converting to a different faith
manichean.0013 = {
	type = character_event
	title = manichean.0013.t
	desc = manichean.0013.desc
	theme = faith
	override_background = { reference = RICE_background_iranian_throne_room }

	left_portrait = {
		character = scope:chaplain		
		trigger = {
			exists = scope:chaplain
		}
		triggered_animation = {
			trigger = {
				scope:chaplain = {
					OR = {
						has_trait = vengeful
						has_trait = wrathful
						has_trait = brave
						has_trait = zealous
						has_trait = honest
					}
				}
			}
			animation = rage
		}
		triggered_animation = {
			trigger = {
				scope:chaplain = {
					OR = {
						has_trait = cynical
						has_trait = arbitrary
						has_trait = content
					}
				}
			}
			animation = eyeroll
		}
		animation = beg
	}

	right_portrait = {
		character = scope:uyghur_leader
		animation = personality_cynical
	}

	immediate = {
		if = {
			limit = {			
				cp:councillor_court_chaplain = {
					exists = yes
					is_available_adult = yes
				}
			}
			cp:councillor_court_chaplain = { save_scope_as = chaplain }
		}
		random_held_title = {
			limit = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_former_uyghur_influence_region
				}
				faith = {
					NOT = {
						has_doctrine = rice_light_purification_doctrine
					}
				}
			}
			save_scope_as = county
		}
		scope:county.faith = {
			save_scope_as = new_faith
		}
	}
	
	option = { # Ok
		name = manichean.0013.a
		set_character_faith_with_conversion = scope:new_faith
	}
	
	option = { # Ok
		name = manichean.0013.b
		custom_tooltip = manichean.0013.b.tooltip # Tell player they can still take the decision to convert to another faith if they want to
	}

}



# Bokut intro event
manichean.0014 = {
	type = character_event
	title = manichean.0014.t
	desc = manichean.0014.desc
	theme = RICE_theme_tarim_basin_town

	right_portrait = {
		character = root
		animation = bow_idle
	}

	immediate = {
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_manichean_aspiration_reclaim_uyghur_power_in_qocho
			}
		}
	}

	option = { # Ok
		name = manichean.0014.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = manichean.0014.info
		}
	}

}


######################################################################################
# 
# MINOR DECISIONS
# 
# manichean.0020-manichean.0029
# 
######################################################################################



# Ming Cultist decision
manichean.0020 = {
	type = character_event
	title = manichean.0020.t
	desc = manichean.0020.desc
	theme = martial
	override_background = { reference = army_camp }

	right_portrait = {
		character = root
		animation = marshal
	}

	immediate = {
		RICE_manichean_recruit_ming_cultists_effect = yes
	}
	
	option = { # Ok
		name = manichean.0020.a
	}

}


# Manichean confession decision
manichean.0021 = {
	type = character_event
	title = manichean.0021.t
	desc = manichean.0021.desc
	theme = faith

	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Ok
		name = manichean.0021.a
		add_piety = { RICE_manichean_confession_piety_gain_min RICE_manichean_confession_piety_gain_max }
		RICE_manichean_confession_decision_effect = yes
		RICE_manichean_confession_effect = yes
	}

}




######################################################################################
# 
# BEMA FESIVAL
# 
# manichean.0030-manichean.0049
# 
######################################################################################


# Bema Festival preparations
manichean.0030 = {
	type = activity_event
	title = manichean.0030.t
	desc = manichean.0030.desc
	theme = faith
	override_background = { reference = relaxing_room }
	
	right_portrait = root
	
	option = { # Ok
		name = manichean.0030.a
		trigger_event = {
			id = manichean.0031
			days = { 3 5 }
		}	
	}
}


# Bema Festival - temp event
manichean.0031 = {
	type = activity_event
	title = manichean.0031.t
	desc = manichean.0031.desc
	theme = faith
	override_background = { reference = relaxing_room }
	
	right_portrait = root

	immediate = {
		RICE_manichean_bema_festival_lose_sin_effect = yes
	}
	
	option = { # Ok
		name = manichean.0030.a
		# trigger_event = {
		# 	id = manichean.0032
		# 	days = { 3 5 }
		# }	
	}

	after = {
		if = {
			limit = {
				root = scope:host
			}
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}

}






######################################################################################
# 
# MANUSCRIPT DECISION
# 
# manichean.0050-manichean.0069
# 
######################################################################################

# Manuscript - will you do it yourself or not?
manichean.0050 = {
	type = character_event
	title = manichean.0050.t
	desc = manichean.0050.desc
	theme = learning

	right_portrait = {
		character = root
		animation = thinking
	}

	immediate = {
		# If you're doing another religious text, figure out what type it is
		if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:other_religions_texts
			}
			if = {
				limit = {
					# If you own a title with a non-Manichean faith, pick that
					any_held_title = {
						tier = county
						NOT = { faith = { has_doctrine = special_doctrine_rice_doctrine_late_manicheism_abandon } }
						NOT = { faith = { has_doctrine = unreformed_faith_doctrine } }
					}
				}
				random_held_title = {
					limit = {
						tier = county
						NOT = { faith = { has_doctrine = special_doctrine_rice_doctrine_late_manicheism_abandon } }
						NOT = { faith = { has_doctrine = unreformed_faith_doctrine } }
					}
					add_to_list = other_faith_candidates
				}
				random_in_list = {
					list = other_faith_candidates
					weight = {
						base = 10
						modifier = {
							any_county_province = {
								has_holding = yes
							}
							add = 10
						}
						modifier = {
							OR = {
								faith.religion = religion:christianity_religion
								faith.religion = religion:buddhism_religion
								faith.religion = religion:zoroastrianism_religion
								faith.religion = religion:judaism_religion
								faith.religion = religion:taoism_religion
							}
							add = 30
						}
					}
					save_scope_as = other_faith
				}
			}
			# If you don't own one, choose one in the appropriate region
			# Starting with Europe = Christianity
			else_if = {
				limit = {
					capital_county = {
						title_province = { 
							OR = {
								geographical_region = world_europe
								geographical_region = world_asia_minor
							}
						}
					}
				}
				religion:christianity_religion = {
					random_faith = {
						save_scope_as = other_faith
					}
				}
			}
			# North Africa/eastern steppes = Judaism
			else_if = {
				limit = {
					capital_county = {
						title_province = { 
							geographical_region = world_africa
						}
					}
				}
				religion:judaism_religion = {
					random_faith = {
						save_scope_as = other_faith
					}
				}
			}
			# Middle East = Zoroastrianism
			else_if = {
				limit = {
					capital_county = {
						title_province = { 
							geographical_region = world_middle_east
						}
					}
				}
				religion:zoroastrianism_religion = {
					random_faith = {
						save_scope_as = other_faith
					}
				}
			}
			# India/Central Asia = Buddhism
			else_if = {
				limit = {
					capital_county = {
						title_province = { 
							OR = {
								geographical_region = world_india
								geographical_region = world_steppe
								geographical_region = world_tibet
								geographical_region = world_burma
							}
						}
					}
				}
				religion:buddhism_religion = {
					random_faith = {
						save_scope_as = other_faith
					}
				}
			}
			# If for some reason you don't meet these criteria
			else = {
				random_list = {
					10 = {
						religion:christianity_religion = {
							random_faith = {
								save_scope_as = other_faith
							}
						}
					}
					10 = {
						religion:judaism_religion = {
							random_faith = {
								save_scope_as = other_faith
							}
						}
					}
					10 = {
						religion:zoroastrianism_religion = {
							random_faith = {
								save_scope_as = other_faith
							}
						}
					}
					10 = {
						religion:buddhism_religion = {
							random_faith = {
								save_scope_as = other_faith
							}
						}
					}
					10 = {
						religion:taoism_religion = {
							random_faith = {
								save_scope_as = other_faith
							}
						}
					}
				}
			}
		}
	}

	option = { # Ok
		name = manichean.0050.a			
		set_variable = {
			name = RICE_manichean_manuscript_author
			value = flag:other
			days = 730 # A little over one year just in case
		}
	}

	option = { # Ok
		name = manichean.0050.b
		trigger = {
			faith = { has_doctrine = special_doctrine_rice_doctrine_late_manicheism_abandon }
			learning >= mediocre_skill_rating # 8			
		}
		skill = learning
		show_as_unavailable = {
			learning < mediocre_skill_rating # 8
		}		
		set_variable = {
			name = RICE_manichean_manuscript_author
			value = flag:self
			days = 730 # A little over one year just in case
		}
		add_character_modifier = {
			modifier = RICE_manichean_writing_manuscript
			days = 365
		}
	}

	option = { # Ok
		name = manichean.0050.b
		trigger = {
			NOT = { faith = { has_doctrine = special_doctrine_rice_doctrine_late_manicheism_abandon } }
			learning >= decent_skill_rating # 12		
		}
		skill = learning
		show_as_unavailable = {
			learning < decent_skill_rating # 12
		}	
		set_variable = {
			name = RICE_manichean_manuscript_author
			value = flag:self
			days = 730 # A little over one year just in case
		}
		add_character_modifier = {
			modifier = RICE_manichean_writing_manuscript
			days = 365
		}
	}

	after = {
		custom_tooltip = manichean.0050.tooltip
		if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:seven_treatises
			}
			trigger_event = manichean.0051
			# trigger_event = {
			# 	id = manichean.0051
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:shabuhragan
			}
			trigger_event = manichean.0052
			# trigger_event = {
			# 	id = manichean.0052
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:arzhang
			}
			trigger_event = manichean.0053
			# trigger_event = {
			# 	id = manichean.0053
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:kephalaia
			}
			trigger_event = manichean.0054
			# trigger_event = {
			# 	id = manichean.0054
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:hymn_book
			}
			trigger_event = manichean.0055
			# trigger_event = {
			# 	id = manichean.0055
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:confessional_texts
			}
			trigger_event = manichean.0056
			# trigger_event = {
			# 	id = manichean.0056
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:parables_and_tales
			}
			trigger_event = manichean.0057
			# trigger_event = {
			# 	id = manichean.0057
			# 	days = { 30 365 }
			# }
		}
		else_if = {
			limit = {
				var:RICE_manichean_manuscript_type ?= flag:other_religions_texts
			}
			trigger_event = manichean.0058
			# trigger_event = {
			# 	id = manichean.0058
			# 	days = { 30 365 }
			# }
		}
	}

}

# Manuscript - will you do it yourself or not?
manichean.0051 = {
	type = character_event
	title = manichean.0050.t
	desc = manichean.0050.desc
	theme = learning

	right_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				var:RICE_manichean_manuscript_author ?= flag:self
			}
			animation = happy_teacher
		}
		animation = personality_content
	}

	artifact = { # To display the artifact in the event-window
        target = scope:RICE_manichean_manuscript_artifact
        position = lower_center_portrait
    }

	trigger = {
		faith = { has_doctrine = rice_light_purification_doctrine }
	}

	#Trigger if converted to another faith
	on_trigger_fail = { 
		trigger_event = manichean.0059
	}

	immediate = {
		RICE_manichean_manuscript_general_effect = yes
		random_list = {
			60 = {
				hidden_effect_new_object = {
					create_artifact = {	
						name = RICE_manichean_artifact_seven_treatises_name
						description = RICE_manichean_artifact_seven_treatises_desc
						type = journal
						template = RICE_manichean_manuscript_template
						visuals = RICE_manichean_manuscript
						quality = 15
						wealth = 15
						modifier = artifact_VIET_manichean_manuscript_seven_treatises_modifier_1
						decaying = no
						save_scope_as = RICE_manichean_manuscript_artifact
						history = {
							type = created_before_history
						}
					}
					scope:RICE_manichean_manuscript_artifact = {
						set_variable = RICE_manichean_artifact_seven_treatises_variable
					}
				}
			}
			45 = {
				hidden_effect_new_object = {
					create_artifact = {	
						name = RICE_manichean_artifact_seven_treatises_name
						description = RICE_manichean_artifact_seven_treatises_desc
						type = journal
						template = RICE_manichean_manuscript_template
						visuals = RICE_manichean_manuscript
						quality = 30
						wealth = 30
						modifier = artifact_VIET_manichean_manuscript_seven_treatises_modifier_2
						#max_durability = 40
						decaying = no
						save_scope_as = RICE_manichean_manuscript_artifact
						history = {
							type = created_before_history
						}
					}
					scope:RICE_manichean_manuscript_artifact = {
						set_variable = RICE_manichean_artifact_seven_treatises_variable
					}
				}
			}
			30 = {
				hidden_effect_new_object = {
					create_artifact = {	
						name = RICE_manichean_artifact_seven_treatises_name
						description = RICE_manichean_artifact_seven_treatises_desc
						type = journal
						template = RICE_manichean_manuscript_template
						visuals = RICE_manichean_manuscript
						quality = 65
						wealth = 65
						modifier = artifact_VIET_manichean_manuscript_seven_treatises_modifier_3
						#max_durability = 40
						decaying = no
						save_scope_as = RICE_manichean_manuscript_artifact
						history = {
							type = created_before_history
						}
					}
					scope:RICE_manichean_manuscript_artifact = {
						set_variable = RICE_manichean_artifact_seven_treatises_variable
					}
				}
			}
			15 = {
				hidden_effect_new_object = {
					create_artifact = {	
						name = RICE_manichean_artifact_seven_treatises_name
						description = RICE_manichean_artifact_seven_treatises_desc
						type = journal
						template = RICE_manichean_manuscript_template
						visuals = RICE_manichean_manuscript
						quality = 95
						wealth = 95
						modifier = artifact_VIET_manichean_manuscript_seven_treatises_modifier_4
						#max_durability = 40
						decaying = no
						save_scope_as = RICE_manichean_manuscript_artifact
						history = {
							type = created_before_history
						}
					}
					scope:RICE_manichean_manuscript_artifact = {
						set_variable = RICE_manichean_artifact_seven_treatises_variable
					}
				}
			}
		}
	}

	option = { # Ok
		name = manichean.0050.a
		show_as_tooltip = {
			scope:RICE_manichean_manuscript_artifact = {
				set_owner = {
					target = root
				}
			}
		}
	}

	after = {
		RICE_manichean_manuscript_event_chain_cleanup_effect = yes
	}

}





######################################################################################
# 
# MISC CHINESE MANICHEISM STUFF
# 
# manichean.0090-manichean.0069
# 
######################################################################################

# Chen Pingshan intro event
manichean.0090 = {
	type = character_event
	title = manichean.0090.t
	desc = manichean.0090.desc
	theme = faith

	left_portrait = {
		character = scope:lin_deng
		animation = personality_content
	}

	right_portrait = {
		character = root
		animation = prayer
	}

	immediate = {
		character:RICE_chinese_manichean_001 = {
			save_scope_as = lin_deng
		}
		show_as_tooltip = {
			add_trait = RICE_disciple_of_lin_deng
			add_character_modifier = {
				modifier = RICE_manichean_aspiration_continue_lin_dengs_legacy
			}
		}
	}

	option = { # Ok
		name = manichean.0090.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = manichean.0090.info
		}
	}

}





